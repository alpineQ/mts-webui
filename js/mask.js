(function(b){var a=function(h,m,k){var j=this;h=b(h);var c;m="function"==typeof m?m(h.val(),k):m;j.init=function(){k=k||{};j.byPassKeys=[8,9,16,37,38,39,40,46,91];j.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};j.translation=b.extend({},j.translation,k.translation);j=b.extend(!0,{},j,k);h.each(function(){!1!==k.maxlength&&h.attr("maxlength",m.length);h.attr("autocomplete","off");i.destroyEvents();i.events();i.val(i.getMasked())})};var i={events:function(){h.on("keydown.mask",function(){c=i.val()});h.on("keyup.mask",i.behaviour);h.on("paste.mask",function(){setTimeout(function(){h.keydown().keyup()},100)})},destroyEvents:function(){h.off("keydown.mask").off("keyup.mask").off("paste.mask")},val:function(e){var f="input"===h.get(0).tagName.toLowerCase();return 0<arguments.length?f?h.val(e):h.text(e):f?h.val():h.text()},behaviour:function(d){d=d||window.event;if(-1===b.inArray(d.keyCode||d.which,j.byPassKeys)){return i.val(i.getMasked()),i.callbacks(d)}},getMasked:function(){var A=[],y=i.val(),z=0,e=m.length,x=0,v=y.length,w=1,d="push",o=-1,g,D;k.reverse?(d="unshift",w=-1,g=0,z=e-1,x=v-1,D=function(){return -1<z&&-1<x}):(g=e-1,D=function(){return z<e&&x<v});for(;D();){var C=m.charAt(z),B=y.charAt(x),f=j.translation[C];f?(B.match(f.pattern)?(A[d](B),f.recursive&&(-1==o?o=z:z==g&&(z=o-w),g==o&&(z-=w)),z+=w):f.optional&&(z+=w,x-=w),x+=w):(A[d](C),B==C&&(x+=w),z+=w)}return A.join("")},callbacks:function(e){var g=i.val(),d=i.val()!==c;if(!0===d&&"function"==typeof k.onChange){k.onChange(g,e,h,k)}if(!0===d&&"function"==typeof k.onKeyPress){k.onKeyPress(g,e,h,k)}if("function"===typeof k.onComplete&&g.length===m.length){k.onComplete(g,e,h,k)}}};j.remove=function(){i.destroyEvents();i.val(j.getCleanVal()).removeAttr("maxlength")};j.getCleanVal=function(){for(var f=[],l=i.val(),d=0,g=m.length;d<g;d++){j.translation[m.charAt(d)]&&f.push(l.charAt(d))}return f.join("")};j.init()};b.fn.mask=function(c,e){return this.each(function(){b(this).data("mask",new a(this,c,e))})};b.fn.unmask=function(){return this.each(function(){b(this).data("mask").remove()})};b("input[data-mask]").each(function(){var c=b(this),e={};"true"===c.attr("data-mask-reverse")&&(e.reverse=!0);"false"===c.attr("data-mask-maxlength")&&(e.maxlength=!1);c.mask(c.attr("data-mask"),e)})})(window.jQuery||window.Zepto);